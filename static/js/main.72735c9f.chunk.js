(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t){},113:function(e,t){},122:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),i=a(10),s=a.n(i),r=(a(66),a(13)),o=a(14),c=a(16),u=a(15),d=a(17),h=a(3),p=a(18),v=(a(70),a(72),a(59)),b=a.n(v),m=(a(94),a(8)),f=(a(47),a(97),[{value:"1a",label:"Title (Randomized) (1a)",index:1},{value:"1b",label:"Structured Abstract (1b)",index:2},{value:"introduction",label:"Introduction",disabled:!0,index:3},{value:"2a",label:"Background (2a)",index:4},{value:"2b",label:"Objective (2b)",index:5},{value:"methods",label:"Methods",disabled:!0,index:6},{value:"3a",label:"Trial Design (3a)",index:7},{value:"3b",label:"Changes TO Trial Design (3b)",index:8},{value:"4a",label:"Eligibility Criteria (4a)",index:9},{value:"4b",label:"Data Collection Setting (4b)",index:10},{value:"5",label:"Interventions (5)",index:11},{value:"6a",label:"Outcomes (6a)",index:12},{value:"6b",label:"Changes to Outcomes (6b)",index:13},{value:"7a",label:"Sample Size Determination (7a)",index:14},{value:"7b",label:"Interim Analyses/Stopping Guidelines (7b)",index:15},{value:"8a",label:"Random Allocation Sequence Generation (8a)",index:16},{value:"8b",label:"Randomization Type (8b)",index:17},{value:"9",label:"Allocation Concealment Mechanism (9)",index:18},{value:"10",label:"Randomization Implementation (10)",index:19},{value:"11a",label:"Blinding Procedure (11a)",index:20},{value:"11b",label:"Similarity of Interventions (11b)",index:21},{value:"12a",label:"Statistical Methods for Outcome Comparison (12a)",index:22},{value:"12b",label:"Statistical Methods for Other Analyses (12b)",index:23},{value:"results",label:"Results",disabled:!0,index:24},{value:"13a",label:"Participant Flow (13a)",index:25},{value:"13b",label:"Participant Loss and Exclusion (13b)",index:26},{value:"14a",label:"Recruitment Period/Follow-Up (14a)",index:27},{value:"14b",label:"Trial Stopping (14b)",index:28},{value:"15",label:"Baseline Data (15)",index:29},{value:"16",label:"Numbers Analyzed (16)",index:30},{value:"17a",label:"Outcome Results (17a)",index:31},{value:"17b",label:"Binary Outcome Results (17b)",index:32},{value:"18",label:"Ancillary Analyses (18)",index:33},{value:"19",label:"Harms (19)",index:34},{value:"discussion",label:"Discussion",disabled:!0,index:35},{value:"20",label:"Limitations (20)",index:36},{value:"21",label:"Generalizability (21)",index:37},{value:"22",label:"Interpretation (22)",index:38},{value:"other",label:"Other",disabled:!0,index:39},{value:"23",label:"Registry/Number (23)",index:40},{value:"24",label:"Protocol Access (24)",index:41},{value:"25",label:"Funding (25)",index:42}]),y=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getSelectionTurples",value:function(e){return e.split(" ").map(function(e){return f[parseInt(e)-1]})}},{key:"createColumn",value:function(e){var t=this,a=this.props.tabID;return{dataField:e,text:e,formatter:function(n,i,s,r){return t.props.columnValues[e][a]&&t.props.columnValues[e][a][s]?l.a.createElement(m.a,{options:f,closeOnSelect:!0,multi:!0,disabled:!0,removeSelected:!0,searchable:!0,onChange:t.props.onSelectChange.bind(t,s),value:t.getSelectionTurples(t.props.columnValues[e][a][s])}):l.a.createElement(m.a,{options:f,closeOnSelect:!0,multi:!0,disabled:!0,removeSelected:!0,searchable:!0,onChange:t.props.onSelectChange.bind(t,s)})}}}},{key:"createReconcileColumn",value:function(){var e=this,t=this.props.tabID,a="Reconciliation";return{dataField:"reconcile",text:"RECONCILIATION",formatter:function(n,i,s,r){return e.props.columnValues[a][t]&&e.props.columnValues[a][t][s]?l.a.createElement(m.a,{options:f,closeOnSelect:!0,multi:!0,removeSelected:!0,searchable:!0,onChange:e.props.onSelectChange.bind(e,s),value:e.getSelectionTurples(e.props.columnValues[a][t][s])}):l.a.createElement(m.a,{options:f,closeOnSelect:!0,multi:!0,removeSelected:!0,searchable:!0,onChange:e.props.onSelectChange.bind(e,s)})}}}},{key:"render",value:function(){var e=this,t=[];if(t.push({dataField:"id",text:"ID",attrs:{width:"3%",textAlign:"center"}}),t.push({dataField:"sentence",text:"SENTENCE",attrs:{width:"50%"},classes:function(t,a,n,l){return e.props.subtitleIndexArray.includes(n+1)?"example1":"example2"}}),this.props.selectedUsers.length>0){for(var a=this.props.selectedUsers,n=0;n<a.length;n++){var i=a[n].value;t.push(this.createColumn(i))}t.push(this.createReconcileColumn())}return l.a.createElement(b.a,{keyField:"id",data:this.props.data,columns:t,striped:!0,hover:!0,condensed:!0})}}]),t}(n.Component),S=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(p.d,null,l.a.createElement(p.b,null,Array(this.props.titles.length).fill().map(function(t,a){return l.a.createElement(p.a,null," ",e.props.titles[a]," ")})),l.a.createElement("div",null,Array(this.props.titles.length).fill().map(function(t,a){return e.props.selectionValuesDict?l.a.createElement(p.c,null,l.a.createElement(y,{KeyField:"id",data:e.props.data[a],columnValues:e.props.selectionValuesDict,tabID:a,onSelectChange:e.props.onSelectChange.bind(e,a),checkSelections:e.props.checkSelections,selectedUsers:e.props.selectedUsers,subtitleIndexArray:e.props.subtitleIndexArray[a]})):l.a.createElement(p.c,null,l.a.createElement(y,{KeyField:"id",data:e.props.data[a],tabID:a,onSelectChange:e.props.onSelectChange.bind(e,a),checkSelections:e.props.checkSelections,subtitleIndexArray:e.props.subtitleIndexArray[a]}))}))))}}]),t}(n.Component),g=(a(99),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).retrieveUserNames(),a.retrieveFileNames(),a.handleUserChange=a.handleUserChange.bind(Object(h.a)(Object(h.a)(a))),a.handleFileChange=a.handleFileChange.bind(Object(h.a)(Object(h.a)(a))),a.fetchData=a.fetchData.bind(Object(h.a)(Object(h.a)(a))),a.updateFileList=a.updateFileList.bind(Object(h.a)(Object(h.a)(a))),a.handleReconciliationSubmit=a.handleReconciliationSubmit.bind(Object(h.a)(Object(h.a)(a))),a.handleReconciliationChange=a.handleReconciliationChange.bind(Object(h.a)(Object(h.a)(a))),a.state={},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"retrieveUserNames",value:function(){var e=this,t=new XMLHttpRequest;t.open("POST","GetUserNames.php",!0),t.setRequestHeader("Content-type","application/json"),t.onreadystatechange=function(){if(4===t.readyState){var a=t.responseText.trim().split(" "),n=[],l=!0,i=!1,s=void 0;try{for(var r,o=a[Symbol.iterator]();!(l=(r=o.next()).done);l=!0){var c=r.value;n.push({value:c,label:c})}}catch(u){i=!0,s=u}finally{try{l||null==o.return||o.return()}finally{if(i)throw s}}e.setState({users:n})}},t.send(null)}},{key:"retrieveFileNames",value:function(){var e=this,t=new XMLHttpRequest;t.open("POST","GetFileNamesRe.php",!0),t.setRequestHeader("Content-type","application/json"),t.onreadystatechange=function(){if(4===t.readyState){var a=t.responseText.trim().split(" "),n=[];if(0!=a.length){var l=!0,i=!1,s=void 0;try{for(var r,o=a[Symbol.iterator]();!(l=(r=o.next()).done);l=!0){var c=r.value;n.push({value:c,label:c})}}catch(u){i=!0,s=u}finally{try{l||null==o.return||o.return()}finally{if(i)throw s}}e.setState({files:n})}}},t.send(null)}},{key:"handleFileChange",value:function(e){e?(this.setState({selectedFile:e,showTable:!1}),this.state.selectedUsers.length>1&&this.fetchData(e)):this.setState({selectedFile:null,showTable:!1})}},{key:"handleUserChange",value:function(e){this.setState({selectedFile:null,showTable:!1}),e?(this.setState({selectedUsers:e}),e.length>1?(this.updateFileList(e),document.getElementById("message").innerHTML=""):(this.setState({showTable:!1}),document.getElementById("message").innerHTML="Select at least two users")):(this.setState({selectedUsers:null,showTable:!1}),document.getElementById("message").innerHTML="Select at least two users")}},{key:"handleReconciliationChange",value:function(e,t,a){var n=this.state.selectionValuesDict,l=n.Reconciliation;if(a){for(var i=l[e]||[],s="",r=0;r<a.length;r++)s=s+a[r].index+" ";i[t]=s.trim(),l[e]=i,n.Reconciliation=l,this.setState({selectionValuesDict:n})}else l[e][t]=null,n.Reconciliation=l,this.setState({selectionValuesDict:n})}},{key:"handleReconciliationSubmit",value:function(e){for(var t,n=new(a(48).Builder),l=this.state.xmlParsedJson,i=this.state.selectionValuesDict.Reconciliation,s=0;s<this.state.data.length;s++)for(var r=0;r<this.state.data[s].length;r++){var o=this.findSentenceIndex(this.state.data[s][r].sentence_id);-1!=o&&(i[s]&&i[s][r]?(t=i[s][r],l.document.sentence[o].$.selection=t):l.document.sentence[o].$.selection="")}var c=n.buildObject(l),u=new XMLHttpRequest;u.open("POST","PostAnnotatedJSONRe.php",!0),u.setRequestHeader("Content-type","text/xml"),u.onreadystatechange=function(){if(4===u.readyState){u.responseText;alert("Successfully saved.")}};var d={};d.xml=c,d.filename=this.state.selectedFile.value,u.send(JSON.stringify(d))}},{key:"updateFileList",value:function(e){var t=this,a=new XMLHttpRequest;a.open("POST","GetCommonFileNamesRe.php",!0),a.setRequestHeader("Content-type","application/json"),a.onreadystatechange=function(){if(4===a.readyState){var e=a.responseText;if(""!=e.trim()){var n=e.trim().split(" "),l=[],i=!0,s=!1,r=void 0;try{for(var o,c=n[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var u=o.value;l.push({value:u,label:u})}}catch(d){s=!0,r=d}finally{try{i||null==c.return||c.return()}finally{if(s)throw r}}t.setState({files:l})}else t.setState({files:null}),document.getElementById("message").innerHTML="No common annotation file exists"}};var n={},l=[],i=!0,s=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var u=o.value;l.push(u.value)}}catch(d){s=!0,r=d}finally{try{i||null==c.return||c.return()}finally{if(s)throw r}}n.userList=l.join(" "),a.send(JSON.stringify(n)),this.setState({userList:l.join(" ")})}},{key:"getSubTitles",value:function(e){var t=[],a=!0,n=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var r=i.value;t.push(r.$.title),r.section&&Array.prototype.push.apply(t,this.getSubTitles(r.section))}}catch(o){n=!0,l=o}finally{try{a||null==s.return||s.return()}finally{if(n)throw l}}return t}},{key:"findSentenceIndex",value:function(e){for(var t=this.state.xmlParsedJson,a=0;a<t.document.sentence.length;){if(t.document.sentence[a].$.id==e)return a;a++}return-1}},{key:"fetchData",value:function(e){var t=this,n=e.value,l=this.state.selectedUsers,i=this.state.selectedUsers.length,s=new XMLHttpRequest;s.open("POST","GetAnnotationFileRe.php",!0),s.setRequestHeader("Content-type","application/json"),s.onreadystatechange=function(){if(4===s.readyState){var e=s.responseText,r=JSON.parse(e),o=new(a(48).Parser)({trim:!0});o.parseString(r[l[0].value],function(e,a){var n=[],i=[],s=[],r=[[]],o=[[]],c=[],u=[[]],d=[[]],h=1,p=0;u[p]=[],d[p]=[];var v=a.document.sentence[1].text[0]._,b=!0,m=!1,f=void 0;try{for(var y,S=a.document.section[Symbol.iterator]();!(b=(y=S.next()).done);b=!0){var g=y.value;if(n.length>0){var x=s[s.length-1],O=g.$.textSpan.split("-")[0];parseInt(O)-parseInt(x)>10&&(n.push("UNNAMED"),i.push((parseInt(x)+1).toString()),s.push((parseInt(O)-1).toString()))}n.push(g.$.title),i.push(g.$.titleSpan.split("-")[0]),s.push(g.$.textSpan.split("-")[1]),g.section&&Array.prototype.push.apply(c,t.getSubTitles(g.section))}}catch(e){m=!0,f=e}finally{try{b||null==S.return||S.return()}finally{if(m)throw f}}var C=!0,E=!1,R=void 0;try{for(var I,T=a.document.sentence[Symbol.iterator]();!(C=(I=T.next()).done);C=!0){var w=I.value,j=w.$.charOffset.split("-"),A=j[0],F=j[1];i.includes(A)||(parseInt(F)<=parseInt(s[p])?(r[p].push({id:h,sentence:w.text[0]._,sentence_id:w.$.id}),c.includes(w.text[0]._)&&o[p].push(h)):(h=1,u[p+=1]=[],d[p]=[],r[p]=[],r[p].push({id:h,sentence:w.text[0]._,sentence_id:w.$.id}),o[p]=[],c.includes(w.text[0]._)&&o[p].push(h)),u[p]||(u[p]=[],d[p]=[]),w.$.selection&&(u[p][h-1]=w.$.selection,d[p][h-1]=w.$.selection),h+=1)}}catch(e){E=!0,R=e}finally{try{C||null==T.return||T.return()}finally{if(E)throw R}}var k={};k[l[0].value]=u,k.Reconciliation=d,t.setState({titles:n,data:r,docTitle:v,xmlParsedJson:a,selectionValuesDict:k,subtitleIndexArray:o})}),r.Reconciliation&&(l.push({value:"Reconciliation",label:"Reconciliation"}),i++);for(var c=1;c<i;c++)o.parseString(r[l[c].value],function(e,a){var n=[],i=[],s=[],r=[[]],o=1,u=0;r[u]=[];var d=!0,h=!1,p=void 0;try{for(var v,b=a.document.section[Symbol.iterator]();!(d=(v=b.next()).done);d=!0){var m=v.value;if(n.length>0){var f=s[s.length-1],y=m.$.textSpan.split("-")[0];parseInt(y)-parseInt(f)>10&&(n.push(""),i.push((parseInt(f)+1).toString()),s.push((parseInt(y)-1).toString()))}n.push(m.$.title),i.push(m.$.titleSpan.split("-")[0]),s.push(m.$.textSpan.split("-")[1])}}catch(e){h=!0,p=e}finally{try{d||null==b.return||b.return()}finally{if(h)throw p}}var S=!0,g=!1,x=void 0;try{for(var O,C=a.document.sentence[Symbol.iterator]();!(S=(O=C.next()).done);S=!0){var E=O.value,R=E.$.charOffset.split("-"),I=R[0],T=R[1];i.includes(I)||(parseInt(T)>parseInt(s[u])&&(o=1,r[u+=1]=[]),r[u]||(r[u]=[]),E.$.selection&&(r[u][o-1]=E.$.selection),o+=1)}}catch(e){g=!0,x=e}finally{try{S||null==C.return||C.return()}finally{if(g)throw x}}var w=t.state.selectionValuesDict;w[l[c].value]=r,t.setState({selectionValuesDict:w})});r.Reconciliation&&l.pop();var u=r.masi;document.getElementById("message").innerHTML="MASI value: "+Number.parseFloat(u).toPrecision(4),t.setState({showTable:!0}),document.getElementById("title").setAttribute("href","../ConsortAnnotation/pdfs/"+n+".pdf")}};var r={};r.userList=this.state.userList,r.filename=n,s.send(JSON.stringify(r))}},{key:"renderTable",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{class:"row"},l.a.createElement("div",{id:"titlediv"},l.a.createElement("a",{target:"_blank",id:"title"},this.state.docTitle)),l.a.createElement("div",{id:"tabtablewrapper"},l.a.createElement(S,{titles:this.state.titles,data:this.state.data,onSelectChange:this.handleReconciliationChange,selectionValuesDict:this.state.selectionValuesDict,selectedUsers:this.state.selectedUsers,subtitleIndexArray:this.state.subtitleIndexArray}))),l.a.createElement("div",{id:"buttonwrapper"},l.a.createElement("button",{onClick:this.handleReconciliationSubmit}," Submit ")))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h1",{align:"center",id:"header"}," CONSORT Reconciliation Tool"),l.a.createElement("a",{href:"CONSORT-guideline.pdf",target:"_blank",align:"right"},"See Guideline"),l.a.createElement("div",{class:"filters"},l.a.createElement("div",{class:"userdropdown"},l.a.createElement(m.a,{options:this.state.users,closeOnSelect:!0,multi:!0,removeSelected:!0,searchable:!1,onChange:this.handleUserChange,value:this.state.selectedUsers})),l.a.createElement("div",{class:"filedropdown"},l.a.createElement(m.a,{options:this.state.files,closeOnSelect:!0,searchable:!0,value:this.state.selectedFile,onChange:this.handleFileChange})),l.a.createElement("div",null,l.a.createElement("h6",{id:"message"})))),this.state.showTable?this.renderTable():l.a.createElement("h1",null," no table available "))}}]),t}(n.Component));s.a.render(l.a.createElement(g,null),document.getElementById("root"))},61:function(e,t,a){e.exports=a(122)},66:function(e,t,a){},72:function(e,t,a){},97:function(e,t,a){},99:function(e,t,a){}},[[61,2,1]]]);
//# sourceMappingURL=main.72735c9f.chunk.js.map